<VirtualHost *:80>
  ServerName vpn-mig.com
  ServerAlias www.vpn-mig.com	
  Redirect permanent / https://vpn-mig.com/
	ServerAdmin webmaster@localhost
	DocumentRoot /var/www/html

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

</VirtualHost>

	<VirtualHost *:443>
		ServerAdmin info-vpn-mig@protonmail.com
		ServerName vpn-mig.com
		ServerAlias www.vpn-mig.com

		DocumentRoot /var/www/html
	        Protocols h2 http:/1.1

		<If "%{HTTP_HOST} == 'www.vpn-mig.com'">
			 Redirect permanent / https://vpn-mig.com/
		</If>

		ErrorLog ${APACHE_LOG_DIR}/error.log
		CustomLog ${APACHE_LOG_DIR}/access.log combined

		SSLEngine on

		SSLCertificateFile /etc/letsencrypt/live/vpn-mig.com/fullchain.pem
		SSLCertificateKeyFile /etc/letsencrypt/live/vpn-mig.com/privkey.pem

		
		SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384

		SSLProtocol All -SSLv2 -SSLv3 -TLSv1 -TLSv1.1
		SSLHonorCipherOrder on
		SSLCompression      off
		SSLSessionTickets   off
		Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains"


		<Directory /var/www/html/>
			Options FollowSymlinks
			AllowOverride All
			Require all granted
		</Directory>
			
		<FilesMatch "\.(cgi|shtml|phtml|php)$">
				SSLOptions +StdEnvVars
		</FilesMatch>
		<Directory /usr/lib/cgi-bin>
				SSLOptions +StdEnvVars
		</Directory>

	</VirtualHost>
